From dd0aef5bcfb29096df070afe7929cce60486507a Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Sun, 9 Apr 2023 15:22:59 +0300
Subject: [PATCH] video: draft #03

Signed-off-by: Valentin Raevsky <valentin@compulab.co.il>
---
 arch/arm64/boot/dts/compulab/ucm-imx93.dts     | 6 ++++--
 drivers/gpu/drm/panel/panel-startek-ili9881c.c | 4 ++--
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/arch/arm64/boot/dts/compulab/ucm-imx93.dts b/arch/arm64/boot/dts/compulab/ucm-imx93.dts
index e5efc6c586eb..b1c4778bda1f 100644
--- a/arch/arm64/boot/dts/compulab/ucm-imx93.dts
+++ b/arch/arm64/boot/dts/compulab/ucm-imx93.dts
@@ -309,10 +309,12 @@
 		panel-height-mm = <115>;
 		status = "okay";
 
+#if 0
 		display-timings {
 			native-mode = <&timing1>;
 			timing1: timing1 {
-				clock-frequency = <61776000>;
+				clock-frequency = <30000000>;
+				/*clock-frequency = <61776000>;*/
 				hactive = <1280>;
 				vactive = <720>;
 				hfront-porch = <30>;
@@ -323,7 +325,7 @@
 				vsync-len = <10>;
 			};
 		};
-
+#endif
 		port {
 			panel_in: endpoint {
 				remote-endpoint = <&dsi_out>;
diff --git a/drivers/gpu/drm/panel/panel-startek-ili9881c.c b/drivers/gpu/drm/panel/panel-startek-ili9881c.c
index 9e2287981830..d54d2148ea99 100644
--- a/drivers/gpu/drm/panel/panel-startek-ili9881c.c
+++ b/drivers/gpu/drm/panel/panel-startek-ili9881c.c
@@ -27,7 +27,7 @@
 
 #define   LCD_XSIZE_TFT   720
 #define   LCD_YSIZE_TFT   1280
-#define   PCLOCK          60000
+#define   CLOCK           60000
 #define   LCD_VBPD        20
 #define   LCD_VFPD        10
 #define   LCD_VSPW        10
@@ -498,7 +498,7 @@ static int ili9881c_unprepare(struct drm_panel *panel)
 }
 
 static const struct drm_display_mode bananapi_default_mode = {
-    .clock	= PCLOCK,
+    .clock	= CLOCK,
 
     .hdisplay	= LCD_XSIZE_TFT,
     .hsync_start= LCD_XSIZE_TFT + LCD_HFPD,
-- 
2.17.1

