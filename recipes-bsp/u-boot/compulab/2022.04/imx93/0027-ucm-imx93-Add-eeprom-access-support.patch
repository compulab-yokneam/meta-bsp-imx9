From 69a8fa868b6f7aff96447c0cd1baf7a2d8238e67 Mon Sep 17 00:00:00 2001
From: Valentin Raevsky <valentin@compulab.co.il>
Date: Tue, 6 Jun 2023 11:42:09 +0300
Subject: [PATCH] ucm-imx93: Add eeprom access support

Signed-off-by: Valentin Raevsky <valentin@compulab.co.il>
---
 board/compulab/ucm-imx93/Makefile    | 2 ++
 board/compulab/ucm-imx93/ucm-imx93.c | 1 +
 include/configs/compulab-imx93.h     | 9 +++++++++
 3 files changed, 12 insertions(+)

diff --git a/board/compulab/ucm-imx93/Makefile b/board/compulab/ucm-imx93/Makefile
index f92e4e7190..ff69fd5690 100644
--- a/board/compulab/ucm-imx93/Makefile
+++ b/board/compulab/ucm-imx93/Makefile
@@ -14,3 +14,5 @@ else
 obj-$(CONFIG_UCM_IMX93_LPDDR4X) += lpddr4x_timing.o
 endif
 endif
+
+ccflags-y += -I$(srctree)/board/compulab/common
diff --git a/board/compulab/ucm-imx93/ucm-imx93.c b/board/compulab/ucm-imx93/ucm-imx93.c
index 6c0b400c37..c3b95ea4ca 100644
--- a/board/compulab/ucm-imx93/ucm-imx93.c
+++ b/board/compulab/ucm-imx93/ucm-imx93.c
@@ -20,6 +20,7 @@
 #include <usb.h>
 #include <dwc3-uboot.h>
 #include <asm/gpio.h>
+#include "../common/eeprom.h"
 
 DECLARE_GLOBAL_DATA_PTR;
 
diff --git a/include/configs/compulab-imx93.h b/include/configs/compulab-imx93.h
index 0a2c2a3cd8..81f632cc1e 100644
--- a/include/configs/compulab-imx93.h
+++ b/include/configs/compulab-imx93.h
@@ -235,4 +235,13 @@
 
 #endif
 
+/* EEPROM */
+#define CONFIG_SYS_I2C_EEPROM_ADDR_LEN	1
+
+#define CONFIG_SYS_I2C_EEPROM_BUS	0
+#define CONFIG_SYS_I2C_EEPROM_ADDR	0x50
+
+#define CONFIG_SYS_I2C_EEPROM_BUS_SB	2
+#define CONFIG_SYS_I2C_EEPROM_ADDR_SB	0x54
+
 #endif
-- 
2.17.1

